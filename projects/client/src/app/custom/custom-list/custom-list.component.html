<div class="page-layout">
  <aside class="page-sidebar">
    <bx-sidebar-nav type="shop"></bx-sidebar-nav>
    <bx-adverts></bx-adverts>
  </aside>
  <section class="page-content">
    <bx-page-header>
      <div class="page-header">
        <h1>{{page_data?.title}}</h1>
      </div>
      <div class="sort">
        <button class="btn btn-sort" [matMenuTriggerFor]="sortby">Sort By{{getSortTitle()}}</button>
      </div>
    </bx-page-header>
    <bx-custom-gallery [page_data]="page_data" *ngIf="page_data"></bx-custom-gallery>
    <div id="templates" class="page-grid">
      <div class="page-grid-item" bx-custom-item
        *ngFor="let item of products$ | async | paginate: { id: 'server', itemsPerPage: itemsPerPage, currentPage: currentPage, totalItems: total };trackBy: trackByFn;let i = index"
        [item]="item" [position]="i"></div>
    </div>
    <pagination-template class="bx-pagination" #p="paginationApi" (pageChange)="getPage($event)" id="server"
      *ngIf="pageCount > 1">
      <div class="btn-page pagination-previous" [class.disabled]="p.isFirstPage()">
        <a class="link" *ngIf="!p.isFirstPage()" (click)="p.previous()">
          < </a> </div> <div class="btn-page" *ngFor="let page of p.pages"
            [class.current]="p.getCurrent() === page.value">
            <a class="link" [routerLink]="[]" [queryParams]="{p: page.value}" (click)="p.setCurrent(page.value)"
              *ngIf="p.getCurrent() !== page.value">
              <span>{{ page.label }}</span>
            </a>
            <div class="link" *ngIf="p.getCurrent() === page.value">
              <span>{{ page.label }}</span>
            </div>
      </div>
      <div class="btn-page pagination-next" [class.disabled]="p.isLastPage()">
        <a class="link" *ngIf="!p.isLastPage()" (click)="p.next()"> > </a>
      </div>
    </pagination-template>
    <bx-page-info *ngIf="page_data?.description">
      <h3>Custom {{page_data?.title}} Info</h3>
      <span [innerHTML]="page_data.description"></span>
    </bx-page-info>
  </section>
</div>
<mat-menu #sortby="matMenu" yPosition="below">
  <button *ngFor="let option of sortOptions" mat-menu-item (click)="filterProducts(option)">
    <span>{{option.title}}</span>
  </button>
</mat-menu>
